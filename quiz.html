<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
  
<title>Science Station Quiz ‚Äì National Science Day 2026 | ZS Trade Show Chennai</title>

  <meta name="description" content="Take the Science Station Live Quiz at ZS Trade Show 2026 Chennai. Test your knowledge of Raman Effect, pH, and scientific thinking.">
<link rel="canonical" href="https://science-station.vercel.app/quiz.html">
<meta property="og:title" content="Science Station Live Quiz ‚Äì National Science Day 2026">
<meta property="og:description" content="Self-paced science quiz with live leaderboard at ZS Trade Show 2026 Chennai.">
<meta property="og:type" content="website">
<meta property="og:url" content="https://science-station.vercel.app/quiz.html">
<style>
  @import url('https://fonts.googleapis.com/css2?family=Orbitron:wght@400;700;900&family=Rajdhani:wght@300;400;600&display=swap');

  :root {
    --bg: #050a12;
    --surface: #0b1422;
    --card: #0f1e32;
    --border: #1a3a5c;
    --accent: #00d4ff;
    --accent2: #7b2fff;
    --accent3: #00ff9d;
    --text: #c8dff0;
    --muted: #4a7090;
    --correct: #00ff9d;
    --wrong: #ff3860;
    --gold: #ffd700;
    --silver: #c0c0c0;
    --bronze: #cd7f32;
  }

  *, *::before, *::after { box-sizing: border-box; margin: 0; padding: 0; }

  body {
    background: var(--bg);
    color: var(--text);
    font-family: 'Rajdhani', sans-serif;
    min-height: 100vh;
    display: flex;
    align-items: center;
    justify-content: center;
    overflow-x: hidden;
    position: relative;
  }

  /* Starfield background */
  body::before {
    content: '';
    position: fixed;
    inset: 0;
    background-image:
      radial-gradient(1px 1px at 10% 20%, rgba(0,212,255,0.4) 0%, transparent 100%),
      radial-gradient(1px 1px at 30% 60%, rgba(255,255,255,0.3) 0%, transparent 100%),
      radial-gradient(1px 1px at 50% 10%, rgba(0,212,255,0.3) 0%, transparent 100%),
      radial-gradient(1px 1px at 70% 80%, rgba(255,255,255,0.2) 0%, transparent 100%),
      radial-gradient(1px 1px at 90% 35%, rgba(123,47,255,0.4) 0%, transparent 100%),
      radial-gradient(1px 1px at 15% 75%, rgba(255,255,255,0.3) 0%, transparent 100%),
      radial-gradient(1px 1px at 80% 15%, rgba(0,255,157,0.3) 0%, transparent 100%),
      radial-gradient(1px 1px at 45% 90%, rgba(255,255,255,0.2) 0%, transparent 100%),
      radial-gradient(1px 1px at 60% 45%, rgba(0,212,255,0.2) 0%, transparent 100%),
      radial-gradient(2px 2px at 25% 40%, rgba(0,212,255,0.15) 0%, transparent 100%);
    pointer-events: none;
    z-index: 0;
  }

  /* Grid lines */
  body::after {
    content: '';
    position: fixed;
    inset: 0;
    background-image:
      linear-gradient(rgba(0,212,255,0.03) 1px, transparent 1px),
      linear-gradient(90deg, rgba(0,212,255,0.03) 1px, transparent 1px);
    background-size: 60px 60px;
    pointer-events: none;
    z-index: 0;
  }

  #app {
    width: 100%;
    max-width: 680px;
    padding: 20px;
    position: relative;
    z-index: 1;
  }

  .screen {
    display: none;
    animation: fadeSlideIn 0.5s cubic-bezier(0.22, 1, 0.36, 1) forwards;
  }
  .screen.active { display: block; }

  @keyframes fadeSlideIn {
    from { opacity: 0; transform: translateY(24px); }
    to   { opacity: 1; transform: translateY(0); }
  }
  @keyframes fadeSlideOut {
    from { opacity: 1; transform: translateY(0); }
    to   { opacity: 0; transform: translateY(-24px); }
  }

  /* ‚îÄ‚îÄ CARD ‚îÄ‚îÄ */
  .card {
    background: var(--card);
    border: 1px solid var(--border);
    border-radius: 16px;
    padding: 40px 36px;
    position: relative;
    overflow: hidden;
    box-shadow: 0 0 60px rgba(0,212,255,0.05), 0 0 0 1px rgba(0,212,255,0.08);
  }
  .card::before {
    content: '';
    position: absolute;
    top: 0; left: 0; right: 0;
    height: 2px;
    background: linear-gradient(90deg, transparent, var(--accent), var(--accent2), var(--accent3), transparent);
  }

  /* ‚îÄ‚îÄ START SCREEN ‚îÄ‚îÄ */
  .atom-icon {
    font-size: 64px;
    text-align: center;
    margin-bottom: 8px;
    animation: spin 20s linear infinite;
    display: block;
  }
  @keyframes spin {
    from { transform: rotate(0deg); }
    to   { transform: rotate(360deg); }
  }

  .quiz-label {
    font-family: 'Orbitron', monospace;
    font-size: 11px;
    letter-spacing: 4px;
    color: var(--accent);
    text-align: center;
    margin-bottom: 12px;
    text-transform: uppercase;
  }

  h1 {
    font-family: 'Orbitron', monospace;
    font-size: clamp(18px, 4vw, 26px);
    font-weight: 900;
    text-align: center;
    line-height: 1.3;
    background: linear-gradient(135deg, var(--accent), var(--accent2));
    -webkit-background-clip: text;
    -webkit-text-fill-color: transparent;
    background-clip: text;
    margin-bottom: 12px;
  }

  .subtitle {
    text-align: center;
    color: var(--muted);
    font-size: 15px;
    line-height: 1.6;
    margin-bottom: 36px;
  }

  .meta-pills {
    display: flex;
    justify-content: center;
    gap: 12px;
    flex-wrap: wrap;
    margin-bottom: 36px;
  }
  .pill {
    background: rgba(0,212,255,0.08);
    border: 1px solid rgba(0,212,255,0.2);
    border-radius: 100px;
    padding: 6px 16px;
    font-size: 13px;
    color: var(--accent);
    letter-spacing: 1px;
  }

  /* ‚îÄ‚îÄ BUTTONS ‚îÄ‚îÄ */
  .btn {
    display: block;
    width: 100%;
    padding: 16px 24px;
    border: none;
    border-radius: 10px;
    font-family: 'Orbitron', monospace;
    font-size: 14px;
    font-weight: 700;
    letter-spacing: 2px;
    cursor: pointer;
    transition: all 0.2s ease;
    text-transform: uppercase;
  }
  .btn-primary {
    background: linear-gradient(135deg, var(--accent), var(--accent2));
    color: #fff;
    box-shadow: 0 0 30px rgba(0,212,255,0.3);
  }
  .btn-primary:hover {
    transform: translateY(-2px);
    box-shadow: 0 0 40px rgba(0,212,255,0.5);
  }
  .btn-primary:active { transform: translateY(0); }
  .btn-secondary {
    background: transparent;
    color: var(--accent);
    border: 1px solid var(--accent);
    margin-top: 12px;
  }
  .btn-secondary:hover {
    background: rgba(0,212,255,0.08);
    transform: translateY(-2px);
  }

  /* ‚îÄ‚îÄ PROGRESS ‚îÄ‚îÄ */
  .progress-wrap {
    margin-bottom: 28px;
  }
  .progress-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-bottom: 10px;
  }
  .q-counter {
    font-family: 'Orbitron', monospace;
    font-size: 12px;
    color: var(--accent);
    letter-spacing: 2px;
  }
  .progress-bar {
    height: 4px;
    background: var(--border);
    border-radius: 4px;
    overflow: hidden;
  }
  .progress-fill {
    height: 100%;
    background: linear-gradient(90deg, var(--accent), var(--accent2));
    border-radius: 4px;
    transition: width 0.5s cubic-bezier(0.22, 1, 0.36, 1);
    box-shadow: 0 0 8px var(--accent);
  }

  /* ‚îÄ‚îÄ QUESTION ‚îÄ‚îÄ */
  .question-text {
    font-family: 'Rajdhani', sans-serif;
    font-size: clamp(17px, 3vw, 22px);
    font-weight: 600;
    line-height: 1.5;
    margin-bottom: 28px;
    color: #e8f4ff;
  }

  .options {
    display: flex;
    flex-direction: column;
    gap: 12px;
  }

  .option {
    display: flex;
    align-items: center;
    gap: 16px;
    padding: 16px 20px;
    background: var(--surface);
    border: 1px solid var(--border);
    border-radius: 10px;
    cursor: pointer;
    transition: all 0.18s ease;
    font-size: 16px;
    font-weight: 400;
    color: var(--text);
    position: relative;
    overflow: hidden;
  }
  .option::before {
    content: '';
    position: absolute;
    inset: 0;
    background: linear-gradient(90deg, var(--accent), transparent);
    opacity: 0;
    transition: opacity 0.2s;
  }
  .option:hover:not(.disabled) {
    border-color: var(--accent);
    color: #fff;
    transform: translateX(4px);
    box-shadow: -4px 0 0 var(--accent), 0 0 20px rgba(0,212,255,0.1);
  }
  .option:hover:not(.disabled)::before { opacity: 0.04; }

  .opt-letter {
    font-family: 'Orbitron', monospace;
    font-size: 12px;
    font-weight: 700;
    width: 28px;
    height: 28px;
    min-width: 28px;
    display: flex;
    align-items: center;
    justify-content: center;
    border-radius: 6px;
    background: rgba(0,212,255,0.1);
    border: 1px solid rgba(0,212,255,0.2);
    color: var(--accent);
    transition: all 0.18s;
  }
  .option:hover:not(.disabled) .opt-letter {
    background: var(--accent);
    color: var(--bg);
    border-color: var(--accent);
  }

  .option.correct {
    border-color: var(--correct);
    color: var(--correct);
    background: rgba(0,255,157,0.06);
    box-shadow: 0 0 20px rgba(0,255,157,0.15);
    transform: none;
  }
  .option.correct .opt-letter {
    background: var(--correct);
    color: var(--bg);
    border-color: var(--correct);
  }
  .option.wrong {
    border-color: var(--wrong);
    color: var(--wrong);
    background: rgba(255,56,96,0.06);
  }
  .option.wrong .opt-letter {
    background: var(--wrong);
    color: #fff;
    border-color: var(--wrong);
  }
  .option.disabled { cursor: default; pointer-events: none; }
  .option.faded { opacity: 0.4; }

  /* ‚îÄ‚îÄ RESULT SCREEN ‚îÄ‚îÄ */
  .score-display {
    text-align: center;
    margin-bottom: 32px;
  }
  .score-number {
    font-family: 'Orbitron', monospace;
    font-size: clamp(48px, 12vw, 80px);
    font-weight: 900;
    line-height: 1;
    background: linear-gradient(135deg, var(--accent3), var(--accent));
    -webkit-background-clip: text;
    -webkit-text-fill-color: transparent;
    background-clip: text;
    display: block;
    margin-bottom: 8px;
    animation: countUp 0.6s ease;
  }
  @keyframes countUp {
    from { transform: scale(0.5); opacity: 0; }
    to   { transform: scale(1); opacity: 1; }
  }
  .score-label {
    font-size: 18px;
    color: var(--muted);
  }
  .score-msg {
    margin-top: 12px;
    font-size: 15px;
    color: var(--accent);
    letter-spacing: 1px;
  }

  .name-section h3 {
    font-family: 'Orbitron', monospace;
    font-size: 13px;
    letter-spacing: 3px;
    color: var(--accent);
    margin-bottom: 14px;
    text-transform: uppercase;
  }
  .input-row {
    display: flex;
    gap: 10px;
  }
  input[type="text"] {
    flex: 1;
    background: var(--surface);
    border: 1px solid var(--border);
    border-radius: 10px;
    padding: 14px 18px;
    color: var(--text);
    font-family: 'Rajdhani', sans-serif;
    font-size: 16px;
    font-weight: 600;
    outline: none;
    transition: border-color 0.2s;
  }
  input[type="text"]:focus { border-color: var(--accent); box-shadow: 0 0 10px rgba(0,212,255,0.15); }
  input[type="text"]::placeholder { color: var(--muted); }
  .btn-submit {
    padding: 14px 24px;
    background: linear-gradient(135deg, var(--accent), var(--accent2));
    border: none;
    border-radius: 10px;
    color: #fff;
    font-family: 'Orbitron', monospace;
    font-size: 12px;
    font-weight: 700;
    letter-spacing: 2px;
    cursor: pointer;
    transition: all 0.2s;
    white-space: nowrap;
  }
  .btn-submit:hover { transform: translateY(-2px); box-shadow: 0 0 20px rgba(0,212,255,0.4); }
  .btn-submit:disabled { opacity: 0.4; cursor: not-allowed; transform: none; }

  /* ‚îÄ‚îÄ LEADERBOARD ‚îÄ‚îÄ */
  .leaderboard-section { margin-top: 32px; }
  .lb-header {
    font-family: 'Orbitron', monospace;
    font-size: 13px;
    letter-spacing: 3px;
    color: var(--accent);
    margin-bottom: 16px;
    text-transform: uppercase;
    display: flex;
    align-items: center;
    gap: 10px;
  }
  .lb-header::after {
    content: '';
    flex: 1;
    height: 1px;
    background: linear-gradient(90deg, var(--border), transparent);
  }

  .lb-table {
    display: flex;
    flex-direction: column;
    gap: 8px;
  }
  .lb-row {
    display: grid;
    grid-template-columns: 42px 1fr auto;
    align-items: center;
    gap: 12px;
    padding: 12px 16px;
    background: var(--surface);
    border: 1px solid var(--border);
    border-radius: 8px;
    animation: fadeSlideIn 0.4s ease backwards;
  }
  .lb-row:nth-child(1) { animation-delay: 0.05s; }
  .lb-row:nth-child(2) { animation-delay: 0.1s; }
  .lb-row:nth-child(3) { animation-delay: 0.15s; }
  .lb-row:nth-child(4) { animation-delay: 0.2s; }
  .lb-row:nth-child(5) { animation-delay: 0.25s; }

  .lb-row.rank-1 { border-color: var(--gold); background: rgba(255,215,0,0.04); }
  .lb-row.rank-2 { border-color: var(--silver); background: rgba(192,192,192,0.03); }
  .lb-row.rank-3 { border-color: var(--bronze); background: rgba(205,127,50,0.03); }
  .lb-row.highlight { border-color: var(--accent); box-shadow: 0 0 16px rgba(0,212,255,0.15); }

  .lb-rank {
    font-family: 'Orbitron', monospace;
    font-size: 14px;
    font-weight: 700;
    text-align: center;
  }
  .lb-row.rank-1 .lb-rank { color: var(--gold); }
  .lb-row.rank-2 .lb-rank { color: var(--silver); }
  .lb-row.rank-3 .lb-rank { color: var(--bronze); }
  .lb-row:not(.rank-1):not(.rank-2):not(.rank-3) .lb-rank { color: var(--muted); }

  .lb-name {
    font-size: 16px;
    font-weight: 600;
    color: var(--text);
    overflow: hidden;
    text-overflow: ellipsis;
    white-space: nowrap;
  }
  .lb-score {
    font-family: 'Orbitron', monospace;
    font-size: 14px;
    font-weight: 700;
    color: var(--accent3);
    white-space: nowrap;
  }

  .empty-lb {
    text-align: center;
    color: var(--muted);
    padding: 20px;
    font-size: 14px;
    letter-spacing: 1px;
  }

  @media (max-width: 480px) {
    .card { padding: 28px 20px; }
    .input-row { flex-direction: column; }
    .btn-submit { width: 100%; }
  }

  /* Glow pulse on card top border */
  @keyframes glowPulse {
    0%, 100% { opacity: 1; }
    50% { opacity: 0.4; }
  }
  .card::before { animation: glowPulse 3s ease-in-out infinite; }
</style>
</head>
<body>
<div id="app">

  <!-- START SCREEN -->
  <div id="screen-start" class="screen active">
    <div class="card">
      <span class="atom-icon">‚öõ</span>
      <div class="quiz-label">National Science Day 2026</div>
      <h1>Science Station Quiz</h1>
      <p class="subtitle">Test your knowledge of fundamental science concepts in this fast-paced quiz. Four questions. One chance. Are you ready?</p>
      <div class="meta-pills">
        <span class="pill">4 Questions</span>
        <span class="pill">Self-Paced</span>
        <span class="pill">Leaderboard</span>
      </div>
      <button class="btn btn-primary" onclick="startQuiz()">INITIATE QUIZ</button>
    </div>
  </div>

  <!-- QUESTION SCREEN -->
  <div id="screen-question" class="screen">
    <div class="card">
      <div class="progress-wrap">
        <div class="progress-header">
          <span class="q-counter" id="q-counter">QUESTION 1 / 4</span>
          <span class="q-counter" id="q-score-live">SCORE: 0</span>
        </div>
        <div class="progress-bar">
          <div class="progress-fill" id="progress-fill" style="width:0%"></div>
        </div>
      </div>
      <div class="question-text" id="question-text"></div>
      <div class="options" id="options-container"></div>
    </div>
  </div>

  <!-- RESULT SCREEN -->
  <div id="screen-result" class="screen">
    <div class="card">
      <div class="quiz-label">RESULTS</div>
      <div class="score-display">
        <span class="score-number" id="final-score-num">0</span>
        <div class="score-label" id="final-score-label">You scored 0 out of 4</div>
        <div class="score-msg" id="score-msg"></div>
      </div>

      <div class="name-section" id="name-section">
        <h3>Enter Your Name</h3>
        <div class="input-row">
          <input type="text" id="player-name" placeholder="Your name..." maxlength="20" />
          <button class="btn-submit" onclick="submitScore()">SUBMIT</button>
        </div>
      </div>

      <div class="leaderboard-section" id="lb-section" style="display:none">
        <div class="lb-header">üèÜ Top 5 Leaderboard</div>
        <div class="lb-table" id="lb-table"></div>
         <p style="margin-top:20px; font-weight:600; color:#00d4ff; text-align:center;">
    Top 3 participants will be recognized at the stall.
  </p>

        <button class="btn btn-secondary" onclick="playAgain()" style="margin-top:20px;">‚ñ∂ PLAY AGAIN</button>
        <button class="btn btn-primary" onclick="generateCertificate()" style="margin-top:15px;">
üéì DOWNLOAD CERTIFICATE
</button>
      </div>
    </div>
  </div>

</div>

  <script type="module">
import { initializeApp } from "https://www.gstatic.com/firebasejs/12.9.0/firebase-app.js";
import { getDatabase, ref, push, onValue } 
from "https://www.gstatic.com/firebasejs/12.9.0/firebase-database.js";

const firebaseConfig = {
  apiKey: "AIzaSyBrJ_ZvcvGBbxjEp1_Eo1nlKtJIw0FoRSE",
  authDomain: "science-station-quiz.firebaseapp.com",
  databaseURL: "https://science-station-quiz-default-rtdb.asia-southeast1.firebasedatabase.app",
  projectId: "science-station-quiz",
  storageBucket: "science-station-quiz.firebasestorage.app",
  messagingSenderId: "792146521045",
  appId: "1:792146521045:web:c03f094a481e2db74d6b5c"
};

const app = initializeApp(firebaseConfig);
const db = getDatabase(app);

window.db = db;
window.ref = ref;
window.push = push;
window.onValue = onValue;
</script>
  
<script>

const QUESTIONS = [
  {
    question: "The Raman Effect primarily involves a change in which property of light?",
    options: ["Speed", "Direction", "Frequency (or wavelength)", "Intensity"],
    correct: 2
  },
  {
    question: "Which principle of scientific experimentation is most similar to A/B testing in SaaS products?",
    options: ["Peer review", "Controlled variables & hypothesis testing", "Publication", "Random observation"],
    correct: 1
  },
  {
    question: "In Raman scattering, the energy difference corresponds to:",
    options: ["Electron spin", "Molecular vibration", "Light speed", "Gravity"],
    correct: 1
  },
  {
    question: "A SaaS algorithm improving from user data best represents which scientific principle celebrated on National Science Day?",
    options: ["Static equilibrium", "Experimental iteration", "Inertial frame", "Closed system"],
    correct: 1
  }
];

const LETTERS = ['A','B','C','D'];
const SCORE_MSGS = ["Keep studying! üìö","Good effort! üî¨","Great work! üß™","Perfect score! üöÄ"];

let currentQ = 0;
let score = 0;

function showScreen(id) {
  document.querySelectorAll('.screen').forEach(s => s.classList.remove('active'));
  document.getElementById(id).classList.add('active');
}

function startQuiz() {
  currentQ = 0;
  score = 0;
  showScreen('screen-question');
  renderQuestion();
}

  function generateCertificate() {
  const name = document.getElementById('player-name').value.trim();

  if (!name) {
    alert("Enter your name first");
    return;
  }

  const canvas = document.createElement("canvas");
  canvas.width = 900;
  canvas.height = 1200;

  const ctx = canvas.getContext("2d");

  // ‚îÄ‚îÄ BACKGROUND GRADIENT ‚îÄ‚îÄ
  const bgGrad = ctx.createLinearGradient(0, 0, 0, canvas.height);
  bgGrad.addColorStop(0, "#081221");
  bgGrad.addColorStop(1, "#0f1e32");
  ctx.fillStyle = bgGrad;
  ctx.fillRect(0, 0, canvas.width, canvas.height);

  // ‚îÄ‚îÄ SUBTLE GRID TEXTURE ‚îÄ‚îÄ
  ctx.strokeStyle = "rgba(0,212,255,0.03)";
  ctx.lineWidth = 1;
  for (let x = 0; x < canvas.width; x += 50) {
    ctx.beginPath(); ctx.moveTo(x, 0); ctx.lineTo(x, canvas.height); ctx.stroke();
  }
  for (let y = 0; y < canvas.height; y += 50) {
    ctx.beginPath(); ctx.moveTo(0, y); ctx.lineTo(canvas.width, y); ctx.stroke();
  }

  const M = 40; // margin from canvas edge

  // ‚îÄ‚îÄ OUTER BORDER (neon blue, 6px) ‚îÄ‚îÄ
  ctx.strokeStyle = "#00d4ff";
  ctx.lineWidth = 6;
  ctx.strokeRect(M, M, canvas.width - M * 2, canvas.height - M * 2);

  // ‚îÄ‚îÄ INNER BORDER (purple glow, 2px) ‚îÄ‚îÄ
  const gap = 12;
  ctx.strokeStyle = "#7b2fff";
  ctx.lineWidth = 2;
  ctx.strokeRect(M + gap, M + gap, canvas.width - (M + gap) * 2, canvas.height - (M + gap) * 2);

  // ‚îÄ‚îÄ CORNER ACCENTS ‚îÄ‚îÄ
  const corners = [
    [M, M], [canvas.width - M, M],
    [M, canvas.height - M], [canvas.width - M, canvas.height - M]
  ];
  corners.forEach(([cx, cy]) => {
    ctx.strokeStyle = "#00d4ff";
    ctx.lineWidth = 3;
    const len = 24;
    const dx = cx === M ? 1 : -1;
    const dy = cy === M ? 1 : -1;
    ctx.beginPath();
    ctx.moveTo(cx + dx * len, cy); ctx.lineTo(cx, cy); ctx.lineTo(cx, cy + dy * len);
    ctx.stroke();
  });

  // ‚îÄ‚îÄ ATOM ICON ‚îÄ‚îÄ
  ctx.font = "52px Arial";
  ctx.textAlign = "center";
  ctx.fillText("‚öõ", canvas.width / 2, 135);

  // ‚îÄ‚îÄ TITLE ‚îÄ‚îÄ
  ctx.save();
  ctx.shadowColor = "#00d4ff";
  ctx.shadowBlur = 18;
  ctx.fillStyle = "#00d4ff";
  ctx.font = "bold 38px 'Orbitron', monospace";
  ctx.textAlign = "center";
  ctx.letterSpacing = "4px";
  // Measure and scale down if needed
  const titleText = "CERTIFICATE OF PARTICIPATION";
  ctx.fillText(titleText, canvas.width / 2, 215);
  ctx.restore();

  // ‚îÄ‚îÄ TITLE UNDERLINE ‚îÄ‚îÄ
  const titleLineGrad = ctx.createLinearGradient(160, 0, 740, 0);
  titleLineGrad.addColorStop(0, "transparent");
  titleLineGrad.addColorStop(0.3, "#00d4ff");
  titleLineGrad.addColorStop(0.7, "#7b2fff");
  titleLineGrad.addColorStop(1, "transparent");
  ctx.strokeStyle = titleLineGrad;
  ctx.lineWidth = 2;
  ctx.beginPath();
  ctx.moveTo(160, 230); ctx.lineTo(740, 230);
  ctx.stroke();

  // ‚îÄ‚îÄ SUBTITLE ‚îÄ‚îÄ
  ctx.fillStyle = "#8ab0cc";
  ctx.font = "24px 'Rajdhani', sans-serif";
  ctx.textAlign = "center";
  ctx.fillText("National Science Day 2026", canvas.width / 2, 278);

  // ‚îÄ‚îÄ DIVIDER DOTS ‚îÄ‚îÄ
  [canvas.width / 2 - 20, canvas.width / 2, canvas.width / 2 + 20].forEach(x => {
    ctx.beginPath();
    ctx.arc(x, 305, 3, 0, Math.PI * 2);
    ctx.fillStyle = "#7b2fff";
    ctx.fill();
  });

  // ‚îÄ‚îÄ PRESENTED TO ‚îÄ‚îÄ
  ctx.fillStyle = "#4a7090";
  ctx.font = "20px 'Rajdhani', sans-serif";
  ctx.textAlign = "center";
  ctx.fillText("This certificate is proudly presented to", canvas.width / 2, 360);

  // ‚îÄ‚îÄ NAME ‚îÄ‚îÄ
  ctx.save();
  ctx.shadowColor = "rgba(0,212,255,0.4)";
  ctx.shadowBlur = 12;
  ctx.fillStyle = "#ffffff";
  ctx.font = "bold 56px 'Rajdhani', sans-serif";
  ctx.textAlign = "center";
  // Clamp long names
  let displayName = name;
  while (ctx.measureText(displayName).width > 720 && displayName.length > 4) {
    displayName = displayName.slice(0, -1);
  }
  if (displayName !== name) displayName += "‚Ä¶";
  ctx.fillText(displayName, canvas.width / 2, 430);
  ctx.restore();

  // ‚îÄ‚îÄ NAME UNDERLINE (neon line) ‚îÄ‚îÄ
  const nameWidth = Math.min(ctx.measureText(displayName).width + 60, 580);
  const nameLineGrad = ctx.createLinearGradient(
    (canvas.width - nameWidth) / 2, 0,
    (canvas.width + nameWidth) / 2, 0
  );
  nameLineGrad.addColorStop(0, "transparent");
  nameLineGrad.addColorStop(0.2, "#00d4ff");
  nameLineGrad.addColorStop(0.8, "#00d4ff");
  nameLineGrad.addColorStop(1, "transparent");
  ctx.strokeStyle = nameLineGrad;
  ctx.lineWidth = 2;
  ctx.beginPath();
  ctx.moveTo((canvas.width - nameWidth) / 2, 446);
  ctx.lineTo((canvas.width + nameWidth) / 2, 446);
  ctx.stroke();

  // ‚îÄ‚îÄ PARTICIPATION TEXT ‚îÄ‚îÄ
  ctx.fillStyle = "#8ab0cc";
  ctx.font = "22px 'Rajdhani', sans-serif";
  ctx.textAlign = "center";
  ctx.fillText("For participating in the", canvas.width / 2, 510);
  ctx.fillStyle = "#c8dff0";
  ctx.font = "bold 24px 'Rajdhani', sans-serif";
  ctx.fillText("Science Station Live Quiz", canvas.width / 2, 542);
  ctx.fillStyle = "#8ab0cc";
  ctx.font = "22px 'Rajdhani', sans-serif";
  ctx.fillText("at ZS Trade Show, Chennai", canvas.width / 2, 574);

  // ‚îÄ‚îÄ SCORE BOX ‚îÄ‚îÄ
  const boxX = canvas.width / 2 - 120;
  const boxY = 618;
  const boxW = 240;
  const boxH = 70;
  const boxGrad = ctx.createLinearGradient(boxX, boxY, boxX + boxW, boxY + boxH);
  boxGrad.addColorStop(0, "rgba(0,212,255,0.08)");
  boxGrad.addColorStop(1, "rgba(123,47,255,0.08)");
  ctx.fillStyle = boxGrad;
  ctx.beginPath();
  ctx.roundRect(boxX, boxY, boxW, boxH, 10);
  ctx.fill();
  ctx.strokeStyle = "rgba(0,212,255,0.3)";
  ctx.lineWidth = 1;
  ctx.stroke();

  ctx.fillStyle = "#4a7090";
  ctx.font = "14px 'Orbitron', monospace";
  ctx.textAlign = "center";
  ctx.fillText("FINAL SCORE", canvas.width / 2, 645);
  ctx.save();
  ctx.shadowColor = "#00ff9d";
  ctx.shadowBlur = 10;
  ctx.fillStyle = "#00ff9d";
  ctx.font = "bold 30px 'Orbitron', monospace";
  ctx.fillText(`${score} / ${QUESTIONS.length}`, canvas.width / 2, 677);
  ctx.restore();

  // ‚îÄ‚îÄ HORIZONTAL RULE ‚îÄ‚îÄ
  const hrGrad = ctx.createLinearGradient(100, 0, 800, 0);
  hrGrad.addColorStop(0, "transparent");
  hrGrad.addColorStop(0.2, "rgba(0,212,255,0.2)");
  hrGrad.addColorStop(0.8, "rgba(0,212,255,0.2)");
  hrGrad.addColorStop(1, "transparent");
  ctx.strokeStyle = hrGrad;
  ctx.lineWidth = 1;
  ctx.beginPath();
  ctx.moveTo(100, 726); ctx.lineTo(800, 726);
  ctx.stroke();

  // ‚îÄ‚îÄ DATE ‚îÄ‚îÄ
  const today = new Date().toLocaleDateString('en-IN', {
    day: 'numeric', month: 'long', year: 'numeric'
  });
  ctx.fillStyle = "#4a7090";
  ctx.font = "18px 'Rajdhani', sans-serif";
  ctx.textAlign = "center";
  ctx.fillText("Date: " + today, canvas.width / 2, 770);

  // ‚îÄ‚îÄ GOLD SEAL BADGE (bottom right) ‚îÄ‚îÄ
  const sealX = canvas.width - M - gap - 80;
  const sealY = canvas.height - M - gap - 80;
  const sealR = 60;

  // Outer glow
  ctx.save();
  ctx.shadowColor = "rgba(255,215,0,0.5)";
  ctx.shadowBlur = 20;

  // Circle gradient
  const sealGrad = ctx.createRadialGradient(sealX, sealY, 10, sealX, sealY, sealR);
  sealGrad.addColorStop(0, "#fff4a0");
  sealGrad.addColorStop(0.5, "#ffd700");
  sealGrad.addColorStop(1, "#b8860b");
  ctx.fillStyle = sealGrad;
  ctx.beginPath();
  ctx.arc(sealX, sealY, sealR, 0, Math.PI * 2);
  ctx.fill();

  // Seal border
  ctx.strokeStyle = "#fff4a0";
  ctx.lineWidth = 3;
  ctx.stroke();
  ctx.restore();

  // Seal inner ring
  ctx.strokeStyle = "rgba(139,90,0,0.4)";
  ctx.lineWidth = 1.5;
  ctx.beginPath();
  ctx.arc(sealX, sealY, sealR - 8, 0, Math.PI * 2);
  ctx.stroke();

  // Seal text
  ctx.save();
  ctx.fillStyle = "#3a2000";
  ctx.font = "bold 11px 'Orbitron', monospace";
  ctx.textAlign = "center";
  ctx.fillText("SCIENCE", sealX, sealY - 5);
  ctx.fillText("STATION", sealX, sealY + 10);
  ctx.font = "10px 'Orbitron', monospace";
  ctx.fillText("‚öõ 2026 ‚öõ", sealX, sealY + 26);
  ctx.restore();

  // ‚îÄ‚îÄ SIGNATURE LINE (bottom left) ‚îÄ‚îÄ
  ctx.strokeStyle = "rgba(0,212,255,0.4)";
  ctx.lineWidth = 1;
  ctx.beginPath();
  ctx.moveTo(M + gap + 30, canvas.height - M - gap - 50);
  ctx.lineTo(M + gap + 180, canvas.height - M - gap - 50);
  ctx.stroke();
  ctx.fillStyle = "#4a7090";
  ctx.font = "14px 'Rajdhani', sans-serif";
  ctx.textAlign = "center";
  ctx.fillText("Organizer", M + gap + 105, canvas.height - M - gap - 32);

  // ‚îÄ‚îÄ FOOTER ‚îÄ‚îÄ
  ctx.fillStyle = "#2a4a60";
  ctx.font = "18px 'Rajdhani', sans-serif";
  ctx.textAlign = "center";
  ctx.fillText("ZS Trade Show Chennai 2026", canvas.width / 2, canvas.height - M - gap - 28);

  // ‚îÄ‚îÄ DOWNLOAD ‚îÄ‚îÄ
  const link = document.createElement("a");
  link.download = "Science_Certificate_" + name.replace(/\s+/g, "_") + ".png";
  link.href = canvas.toDataURL("image/png");
  link.click();
}
function renderQuestion() {
  const q = QUESTIONS[currentQ];
  document.getElementById('q-counter').textContent = `QUESTION ${currentQ + 1} / ${QUESTIONS.length}`;
  document.getElementById('q-score-live').textContent = `SCORE: ${score}`;
  document.getElementById('progress-fill').style.width = `${(currentQ / QUESTIONS.length) * 100}%`;
  document.getElementById('question-text').textContent = q.question;

  const container = document.getElementById('options-container');
  container.innerHTML = '';

  q.options.forEach((opt, i) => {
    const el = document.createElement('div');
    el.className = 'option';
    el.innerHTML = `<span class="opt-letter">${LETTERS[i]}</span><span>${opt}</span>`;
    el.addEventListener('click', () => selectAnswer(i));
    container.appendChild(el);
  });
}

function selectAnswer(chosen) {
  const q = QUESTIONS[currentQ];
  const isCorrect = chosen === q.correct;
  if (isCorrect) score++;

  setTimeout(() => {
    currentQ++;
    if (currentQ < QUESTIONS.length) renderQuestion();
    else showResult();
  }, 600);
}

function showResult() {
  showScreen('screen-result');
  document.getElementById('final-score-num').textContent = score;
  document.getElementById('final-score-label').textContent =
    `You scored ${score} out of ${QUESTIONS.length}`;
  document.getElementById('score-msg').textContent = SCORE_MSGS[score];

  document.getElementById('name-section').style.display = 'block';
  document.getElementById('lb-section').style.display = 'none';
}

function submitScore() {
  const name = document.getElementById('player-name').value.trim();
  if (!name) {
    alert("Please enter your name");
    return;
  }

  const scoreData = {
    name: name,
    score: score,
    timestamp: Date.now()
  };

  const scoresRef = window.ref(window.db, "scores");
  window.push(scoresRef, scoreData);

  document.getElementById('name-section').style.display = 'none';
  document.getElementById('lb-section').style.display = 'block';

  listenToLeaderboard();
}

function listenToLeaderboard() {
  const scoresRef = window.ref(window.db, "scores");

  window.onValue(scoresRef, (snapshot) => {
    const data = snapshot.val();
    const table = document.getElementById("lb-table");
    table.innerHTML = "";

    if (!data) {
      table.innerHTML = "<div class='empty-lb'>No scores yet</div>";
      return;
    }

    const scoresArray = Object.values(data);

    scoresArray.sort((a, b) =>
      b.score - a.score || a.timestamp - b.timestamp
    );

    const top5 = scoresArray.slice(0, 5);

    top5.forEach((entry, index) => {
      const row = document.createElement("div");
      row.className = "lb-row";

      const medal =
        index === 0 ? "ü•á" :
        index === 1 ? "ü•à" :
        index === 2 ? "ü•â" :
        `#${index + 1}`;

      row.innerHTML = `
        <span class="lb-rank">${medal}</span>
        <span class="lb-name">${entry.name}</span>
        <span class="lb-score">${entry.score}/4</span>
      `;

      table.appendChild(row);
    });
  });
}

function playAgain() {
  startQuiz();
}

document.getElementById('player-name')
  .addEventListener('keydown', e => {
    if (e.key === 'Enter') submitScore();
});
</script>
 
  
</body>
</html>
